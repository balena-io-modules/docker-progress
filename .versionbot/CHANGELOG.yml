- commits:
    - subject: Make abortSignal optional in pull/push options
      hash: 1d95c2219a79a928793a5d501b3003b0c3d9126a
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Felipe Lalanne
  version: 5.3.1
  title: ""
  date: 2025-05-15T17:40:54.083Z
- commits:
    - subject: Support AbortSignal option for image push/pull
      hash: 3f4c3fe5dbfdf37740a6c80e0ef08a8dd91eb815
      body: ""
      footer:
        Change-type: minor
        change-type: minor
        Signed-off-by: Christina Ying Wang <christina@balena.io>
        signed-off-by: Christina Ying Wang <christina@balena.io>
      author: Christina Ying Wang
  version: 5.3.0
  title: ""
  date: 2025-05-12T21:49:23.254Z
- commits:
    - subject: Update @balena/lint to 9.x
      hash: 1266dd748790690c8df6ebf45ac64c9ad0f26a85
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.2.7
  title: ""
  date: 2025-04-10T13:59:53.882Z
- commits:
    - subject: Update dependency rimraf to v6
      hash: ec2f2a1170e1f0468822e0234870a14418a06c03
      body: |
        Update rimraf from 5.0.10 to 6.0.1
      footer:
        Change-type: patch
        change-type: patch
      author: balena-renovate[bot]
  version: 5.2.6
  title: ""
  date: 2025-04-02T14:09:16.841Z
- commits:
    - subject: Update dependency @balena/lint to v8
      hash: 60ee04e45c8876ef0f4facfd39c1d891026f2be4
      body: |
        Update @balena/lint from 7.3.0 to 8.2.8
      footer:
        Change-type: patch
        change-type: patch
      author: balena-renovate[bot]
  version: 5.2.5
  title: ""
  date: 2025-03-25T17:20:55.020Z
- commits:
    - subject: Propagate NodeJS Error from stream directly
      hash: 32f0685f9120e9fdb78c469f23d710428a2faaf5
      body: |
        If the error throw from registry stream is
        already a Node Error, wrapping it in an error
        again may obfuscate additional properties
        of the Node error. This commit passes the
        error directly if it's already an Error instance.
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Christina Ying Wang <christina@balena.io>
        signed-off-by: Christina Ying Wang <christina@balena.io>
      author: Christina Ying Wang
  version: 5.2.4
  title: ""
  date: 2025-02-12T18:51:20.905Z
- commits:
    - subject: Make use of nullish coalescing
      hash: f42513b5eab0ed2aac9e28bb76ed61a8126eb730
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.2.3
  title: ""
  date: 2024-01-05T17:02:09.867Z
- commits:
    - subject: Reduce lodash usage
      hash: 9eb5d54942699c44480f1b261888e51c9c7e9c74
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.2.2
  title: ""
  date: 2024-01-05T14:55:03.667Z
- commits:
    - subject: Update dependencies
      hash: 8d8d919ca6593fde3b2b3bb6329fb69e2ec0019a
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.2.1
  title: ""
  date: 2024-01-05T14:45:55.146Z
- commits:
    - subject: Add support for tracking delta generation progress
      hash: 8d090f515e3d3c14b0be32db3d926324daedc936
      body: ""
      footer:
        Change-type: minor
        change-type: minor
      author: Akis Kesoglou
  version: 5.2.0
  title: ""
  date: 2023-06-30T18:07:36.352Z
- commits:
    - subject: Build with Flowzone
      hash: b533a310839d4031d0e0a6d9197439c5ba92bb38
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Akis Kesoglou
  version: 5.1.4
  title: ""
  date: 2023-06-30T17:32:18.924Z
- commits:
    - subject: Reject on the stream closing if it has not already ended successfully
      hash: e46ad706cdb32c20a9ef9358eed4567aef3d1b62
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.1.3
  title: "'Reject on the stream closing if it has not already ended successfully'"
  date: 2022-05-11T16:47:41.323Z
- commits:
    - subject: Update dependencies
      hash: 0ef9c38ccdb048d849a216a3ad52a047a5194073
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 5.1.2
  title: "'Update dependencies'"
  date: 2022-05-10T16:11:14.032Z
- commits:
    - subject: Avoid breaking changes to PushPullOptions required properties
      hash: dba7348ba87ca9d6299ebeab393fb8f6b5aa6ce5
      body: ""
      footer:
        Change-type: patch
        change-type: patch
        Signed-off-by: Kyle Harding <kyle@balena.io>
        signed-off-by: Kyle Harding <kyle@balena.io>
      author: Kyle Harding
  version: 5.1.1
  title: "'Avoid breaking changes to PushPullOptions required properties'"
  date: 2022-05-10T14:44:11.701Z
- commits:
    - subject: Add support for building images with progress
      hash: e072408ee951d3caf46af5050d0b71991d114614
      body: >
        Using build instead of pull allows to add metadata (e.g. labels) to
        pulled images in an

        atomic way. This commit adds the `DockerProgres.build()` method to

        build an image from a remote (or local) source and track the progress of

        the build.
      footer:
        Change-type: minor
        change-type: minor
      author: Felipe Lalanne
  version: 5.1.0
  title: "'Add support for building images with progress'"
  date: 2022-03-10T13:49:23.048Z
- commits:
    - subject: Fix for bad progress values from some registries causing a crash
      hash: fa3f44c11a2067e65eea4ab43a382f7bbb5b75ef
      body: ""
      footer:
        Signed-off-by: Paul Jonathan <pj@balena.io>
        signed-off-by: Paul Jonathan <pj@balena.io>
        Change-type: patch
        change-type: patch
      author: Paul Jonathan Zoulin
  version: 5.0.1
  date: 2021-09-22T18:45:19.157Z
- commits:
    - subject: "Convert to TypeScript. BREAKING: constructor and push/pull interfaces"
      hash: 1b79633f9e0749d84e60ef765ba017aa3159c16a
      body: ""
      footer:
        Change-type: major
        change-type: major
      author: Paulo Castro
    - subject: Delete legacy.coffee and auto-convert CoffeeScript to JavaScript
      hash: 93a2ed107abfbd66ec60a8f24df36e457ec7495d
      body: ""
      footer:
        Change-type: major
        change-type: major
      author: Paulo Castro
    - subject: Add 'package-lock=false' to '.npmrc' (libs shouldn't lock dependencies)
      hash: ca98f6504725c3f9bf5abaff1827691051e899bf
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Paulo Castro
    - subject: Update license to Apache 2.0
      hash: a6fbb08f804e924cfae94e8b2c007c69d0ba8d07
      body: ""
      footer:
        Change-type: major
        change-type: major
      author: Paulo Castro
  version: 5.0.0
  date: 2021-05-05T17:03:51.097Z
- commits:
    - subject: Update to balena-lint 5.x
      hash: 9563bf5150c39c6d6f298a9ed24f7969650273f7
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 4.0.3
  date: 2020-08-17T12:03:45.249Z
- commits:
    - subject: Add .versionbot/CHANGELOG.yml for nested changelogs
      hash: 2cec0f2ef1eb24797b650024873c91c942e74017
      body: ""
      footer:
        Change-type: patch
        change-type: patch
      author: Pagan Gazzard
  version: 4.0.2
  date: 2020-08-17T11:47:14.543Z
- commits:
    - author: Pagan Gazzard
      body: ""
      footers:
        change-type: patch
      hash: 9bb049ea3be13fb1362e39b057f78b19d8e3153d
      subject: Update dependencies
  date: 2020-03-04T14:17:04Z
  version: 4.0.1
- commits:
    - author: Paulo Castro
      body: |-
        The change type is considered 'major' because, by default, errors are
        now thrown for relatively common occurrences such as authentication
        failures when pulling from private registries, and library users may
        have to adapt.
      footers:
        change-type: major
        signed-off-by: Paulo Castro <paulo@balena.io>
      hash: 3eef3685262e6bae8de064b9c50129e5597f4318
      subject: Detect error events in push/pull progress streams
  date: 2019-03-26T16:03:31Z
  version: 4.0.0
- commits:
    - author: Paulo Castro
      body: ""
      footers:
        change-type: patch
        resolves: "#47"
        signed-off-by: Paulo Castro <paulo@balena.io>
      hash: cadd1a72a0c846f3117ef1d4d8589a32d0a94fd0
      subject: "Fix \"Progress error: Cannot read property 'startsWith' of undefined\""
  date: 2019-03-18T12:34:22Z
  version: 3.0.5
- commits:
    - author: Paulo Castro
      body: ""
      footers:
        change-type: patch
        signed-off-by: Paulo Castro <paulo@balena.io>
      hash: 7ce377ebb9ee8f7b54a0724ccab39c2a8208b8aa
      subject: Catch 'unknown blob' errors in progress streams
  date: 2019-03-05T10:24:38Z
  version: 3.0.4
- commits:
    - author: Cameron Diver
      body: ""
      footers:
        change-type: patch
        signed-off-by: Cameron Diver <cameron@balena.io>
      hash: 17d44d1fabbdecf77a9b939bea7b1a1dd1e90af7
      subject: Replace followProgress to avoid caching push/pull state
  date: 2018-12-04T10:52:51Z
  version: 3.0.3
- commits:
    - author: Akis Kesoglou
      body: ""
      footers:
        change-type: patch
        signed-off-by: Akis Kesoglou <akis@resin.io>
      hash: af89d51a2fa0c2eeb0987c7a740ac788832abbd4
      subject: Ensure latest versions of balena-engine can be identified
  date: 2018-10-15T10:51:26Z
  version: 3.0.2
- commits:
    - author: Cameron Diver
      body: ""
      footers:
        change-type: patch
        connects-to: "#41"
        signed-off-by: Cameron Diver <cameron@resin.io>
      hash: 4bb4a670882220c0fafaff8ee0070ed9db056d2c
      subject: Expose docker property of docker-progress
  date: 2017-12-05T17:56:44Z
  version: 3.0.1
- commits:
    - author: Andreas Fitzek
      body: ""
      footers:
        change-type: major
        connects-to: "#39"
        signed-off-by: Andreas Fitzek <andreas@resin.io>
      hash: ada6ebc82e4725d0418a697ee1dd4beeb715ced2
      subject: Pull and Push promises resolve to the registry digest of the image
    - author: Andreas Fitzek
      body: ""
      hash: 2e44d16d8f0e7a906cec2dbc0b0fc41d70c44282
      subject: addressed review
  date: 2017-12-05T12:51:26Z
  version: 3.0.0
- commits:
    - author: Cameron Diver
      body: ""
      footers:
        change-type: patch
        connects-to: "#37"
        signed-off-by: Cameron Diver <cameron@resin.io>
      hash: 6f24f30288dbc404cec76089533be6e1500e1951
      subject: Specify the promises as bluebird promises in typings
  date: 2017-11-01T13:11:01Z
  version: 2.8.1
- commits:
    - author: Cameron Diver
      body: ""
      footers:
        change-type: minor
        connects-to: "#36"
        signed-off-by: Cameron Diver <cameron@resin.io>
      hash: 8b0c3be5f82c58ee08ee94ce5b063b29fa3d4977
      subject: Add typings for index.coffee
  date: 2017-10-31T16:14:11Z
  version: 2.8.0
- commits:
    - author: Akis Kesoglou
      body: Balena is the new name for resin-os/docker, so identify it in a backwards
        compatible way.
      footers:
        change-type: patch
      hash: f902f8aa6f0ba054221b5704fbe485142e9627f7
      subject: Identify Balena
  date: 2017-10-16T14:18:16Z
  version: 2.7.2
- commits:
    - author: Akis Kesoglou
      body: Balaena provides all required progress info its stream of events. Try to
        identify whether we’re working with Balaena and use a tailor-made (and
        very much simplified, and heaps more accurate) progress reporter in that
        case.
      footers:
        change-type: patch
      hash: f729409548107c2eb50e2768f24dd99bbf528257
      subject: Use custom reporter for Balanea
  date: 2017-10-04T15:43:59Z
  version: 2.7.1
- commits:
    - author: Akis Kesoglou
      body: >-
        resin-os/docker extracts the layer as it’s downloaded resulting in
        progress reporting stopping at 50% (since there’s no “Downloading” phase
        anymore).

        We determine that’s the case on-the-fly, by looking for the “Ready to
        download” event status, in which case we create a “link” from the
        download progress tracker to the extraction tracker for that layer by
        sharing the object reference. This let’s us transparently handle the
        coalescing of the two stages and still report an accurate percentage.
      footers:
        change-type: minor
        connects-to: "#32"
        refs: https://github.com/resin-os/balaena/blob/f55283222c05345540a0654cea2ef15031909806/distribution/pull_v2.go#L230
      hash: bc0ff109d119e040673d49980df48f2ea857b2f3
      subject: Handle combined download and extraction stages
    - author: Akis Kesoglou
      body: ""
      hash: f8af92f99b32cc0e16a5ae971f3ee464bacab1d9
      subject: Address review feedback
  date: 2017-10-03T09:20:27Z
  version: 2.7.0
- commits:
    - author: Alexis Svinartchouk
      body: "Connects-To: #30"
      footers:
        change-type: patch
      hash: e3738d514c6c520db273109043eaaff6b18cde59
      subject: Search fo any tag instead of just 'latest' in pushProgress.
  date: 2017-09-06T08:08:00Z
  version: 2.6.4
- commits:
    - author: Pablo Carranza Velez
      body: "Closes #28"
      footers:
        change-type: patch
        signed-off-by: Pablo Carranza Velez <pablo@resin.io>
      hash: 21a8ee9872d81e6cf92a040529bdc0ddf422f423
      subject: Add empty .npmignore to avoid js files being ignored
  date: 2017-08-28T16:38:18Z
  version: 2.6.3
- commits:
    - author: Pablo Carranza Velez
      body: >-
        Up to now the check used a call to version() which causes an unnecessary
        call to the docker API. This causes

        problems with tests in resin-supervisor that need to create a
        DockerProgress instance but not actually use it,

        and are run in an environment without a running docker daemon.
      footers:
        change-type: patch
        signed-off-by: Pablo Carranza Velez <pablo@resin.io>
      hash: da6258bd41862b4ff3a42d045dd7e6b93d655b62
      subject: Avoid calling the docker API to check if the dockerToolbelt option is
        valid
  date: 2017-08-16T23:33:53Z
  version: 2.6.2
- commits:
    - author: Pablo Carranza Velez
      body: >-
        They are generated on prepublish so there's no need to keep them in the
        repo, and now

        that versionist handles the versioning they will not be updated
        automatically, so better

        just remove them.
      footers:
        change-type: patch
        signed-off-by: Pablo Carranza Velez <pablo@resin.io>
      hash: 041b8ae7915b56d23970d7950ca257789d0fbd17
      subject: Remove the .js files from the git repository
  date: 2017-07-17T21:47:22Z
  version: 2.6.1
- commits:
    - author: Pablo Carranza Velez
      body: >-
        This allows us to inject and reuse a Docker instance instead of creating
        a new one.

        The docker-toolbelt update now removes the Async-suffixed methods for
        docker and its

        containers and images (promises are supported natively).
      footers:
        change-type: minor
        signed-off-by: Pablo Carranza Velez <pablo@resin.io>
      hash: b6ea515c2c8942ba66048d0142367c09806cbb62
      subject: Allow passing a dockerToolbelt object in the options, and update
        docker-toolbelt to 3.0.1
  date: 2017-07-14T21:32:21Z
  version: 2.6.0
- commits:
    - author: Pablo Carranza Velez
      body: ""
      footers:
        change-type: patch
        signed-off-by: Pablo Carranza Velez <pablo@resin.io>
      hash: 61a18899ff16a0e42b01deb7591687ae05602e44
      subject: Adapt the changelog to the versionist format
  date: 2017-07-14T19:52:24Z
  version: 2.5.1
- commits:
    - author: Andreas Fitzek
      body: ""
      footers:
        change-type: minor
      hash: 394e8bcc4423bb81da3fb9563045c7f7597064b1
      subject: Forward options object to docker pull
    - author: Andreas Fitzek
      body: ""
      hash: b261453ce4255279ee82cb65230b2115281aa08e
      subject: move options to third argument to match push API
  date: 2017-03-24T10:49:40Z
  version: 2.5.0
- commits:
    - author: Akis Kesoglou
      body: ""
      hash: 3b87c59706fe120aa28c788f399ac0eac9bd29bf
      subject: Fixed parsing Docker version when trying to decide which progress
        reporter to instantiate
  date: 2017-03-10T20:32:51Z
  version: 2.4.4
- commits:
    - author: Akis Kesoglou
      body: ""
      hash: b2ac1b0cd0d8ee5b8a7db24a7b10301d6adf8100
      subject: Fixed getting registry version
  date: 2017-02-15T10:01:50Z
  version: 2.4.3
- commits:
    - author: Akis Kesoglou
      body: ""
      hash: dcdd33ead43b5c43fe30ef1421ecfc9aae1c77b1
      subject: Restore public-facing APIs that were incorrectly removed in v2.4.0
  date: 2017-02-08T10:41:23Z
  version: 2.4.2
- commits:
    - author: Akis Kesoglou
      body: ""
      hash: e322085a8753a0ae8ce0a17550838cc327b2b337
      subject: Minor refactoring/reordering of methods
    - author: Akis Kesoglou
      body: Only applies when pulling from Registry V2
      hash: 871d5704d7d0a1be34cacfdba9e87f129e34c63c
      subject: Calculate extraction progress
    - author: Akis Kesoglou
      body: ""
      hash: 08107f048228977d209b9472f48fb235b2ac5924
      subject: Extracted progress reporting code to a separate class
    - author: Akis Kesoglou
      body: ""
      hash: 640f4b6ca5f45b6931e71fb9f24f5aa48399659b
      subject: Extracted reporting code to external file
    - author: Akis Kesoglou
      body: >-
        This completely removes the initial delay when pulling/pushing but makes
        progress reporting less accurate due to the way it now calculates
        progress.

        This also deprecates compatibility with Docker<1.10.
      hash: 489100aba91ffa3eb99cd07c9396ac015956b4a9
      subject: Removed calls to Registry and/or Docker daemon for Docker>=1.10
    - author: Akis Kesoglou
      body: ""
      hash: 8609bac71f4e60b5cdd52d9faf1356257b3a6137
      subject: Improve legacy push progress calculation when image already exists
    - author: Akis Kesoglou
      body: ""
      hash: 7036ae4f17f9a55427785138766c512adfd7d187
      subject: Added ability to accurately report aggregate progress
    - author: Akis Kesoglou
      body: ""
      hash: 660edc50c5e48e3f80b6147f9f467339917dbc36
      subject: Addressed review feedback
    - author: Akis Kesoglou
      body: ""
      hash: f08c397e53d2fd659e55d0df251adc8716cf2cc9
      subject: More readable and consistent layer size calculation
    - author: Akis Kesoglou
      body: ""
      hash: 2624b13f5d8d0953fd943d1e7f0ca08497363c9c
      subject: Changelog
  date: 2017-02-01T11:25:45Z
  version: 2.4.0
- commits:
    - author: Pagan Gazzard
      body: ""
      hash: 23a4b74e9ae78308434a3f3668a766dfd23e3a8a
      subject: Fix downloading the entire layer to get the size
    - author: Pablo Carranza Velez
      body: ""
      hash: c324d66460ecd7aa8115440b1b298a52ec02f625
      subject: Updated to docker-toolbelt 1.3.1
    - author: Pablo Carranza Velez
      body: ""
      hash: 5309f40538cf3b17ed59df87aeb269afe74ac2aa
      subject: Fix use of `_.sum` for lodash 4
    - author: Pablo Carranza Velez
      body: ""
      hash: 39463a0f1e8af34593e678a5271b744a41e12e32
      subject: Do not export getRegistryAndName and use docker-toolbelt instead
  date: 2016-12-24T01:45:14Z
  version: 2.3.3
- commits:
    - author: Pagan Gazzard
      body: ""
      hash: 2a6ea517ab6196ca4a3c6672f8e7bf09639f8911
      subject: Update to coffee-script 1.11
    - author: Pagan Gazzard
      body: ""
      hash: 62735c9c1d0bc8f89e8d932a624d67d577dcb25b
      subject: Update to bluebird 3
    - author: Pagan Gazzard
      body: ""
      hash: 2a99001b202f68b72322c49374997a048fd4402b
      subject: Update to lodash v4
  date: 2016-10-06T18:17:48Z
  version: 2.3.0
- commits:
    - author: Alexios Theodoros Brezas
      body: ""
      hash: 239e2f70db36c28a6d82b75ae722828cbd2cf15e
      subject: support pulling from v2 registry
    - author: Alexios Theodoros Brezas
      body: ""
      hash: 1c739afc9b53035c7ff2e29cc7abd2765145aa41
      subject: match layers by order if none of ids match
    - author: Alexios Theodoros Brezas
      body: Keep track of pushed size per layer and report one total percentage,
        similar to how pull progress works.
      hash: e699fbfa2a92d5ba39a490b7ea2e8bb37c431809
      subject: Improved push progress for concurrent push.
    - author: Alexios Theodoros Brezas
      body: ""
      hash: 67c1169bad33faabc654e4992f6d837ab552d027
      subject: fix linting errors
    - author: Pagan Gazzard
      body: ""
      hash: 2ca97a97ed006821e727e4b7d0c35f79035a4706
      subject: Add linting
  date: 2016-10-03T02:10:11Z
  version: 2.2.0
- commits:
    - author: Alexios Theodoros Brezas
      body: |-
        Newer versions of docker download multiple layers concurrently. As
        events are processed by docker-progress, the current downloaded size
        changes based on what layer is being downloaded now.
        So, instead of having one variable for keeping track of currently
        downloaded size, we have one entry per layer, and add them up
        to get the aggregate downloaded size.
      hash: 13a8c0ada9ba7411310b68690c2818e758aafc7a
      subject: Correct percentage on parallel pull
    - author: Alexios Theodoros Brezas
      body: ""
      hash: 5d9b435e4536d1b137c236ed6d1ef4fcd41ae010
      subject: Improve error handling and use function for long id checking
  date: 2016-05-26T14:08:01Z
  version: 2.1.0
